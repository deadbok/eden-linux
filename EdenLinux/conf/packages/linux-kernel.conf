#distbuild
#Linux kernel
packages:
	linux-kernel:
		version = 2.6.30
		dir = linux-${version}
		group = basesystem
		url = ftp://ftp.dk.kernel.org/pub/linux/kernel/v2.6/linux-2.6.30.tar.bz2

		#Already in linux-kernel-headers, in toolchain	
		#download()
		unpack(${root}/${build_dir.packages}/${dir}/Makefile)
		copy(${root}/${build_dir.packages}/${dir}/.config, source=${kernel_config.target}, ${kernel_config.target})
		build(build-linux-kernel.mk, ${build_dir.packages}/${dir}/vmlinux, ${unpack} ${copy})
		install(install-linux-kernel.mk, $rootfs_dir/boot/kernel-${version}, ${rootfs_dir}/lib/modules/${version}/modules.dep, ${rootfs_dir}/boot/.dir ${root}/${rootfs_dir}/sbin/.dir ${root}/${rootfs_dir}/sbin/depmod.pl)
		clean()
		distclean()
	:linux-kernel  
:packages