#distbuild
packages:
	e2fsprogs:
		version = 1.41.6
		dir = e2fsprogs-${version}/build
		group = basesystem
		url = http://dfn.dl.sourceforge.net/sourceforge/e2fsprogs/e2fsprogs-${version}.tar.gz
	
		download()
		unpack(${build_dir.packages}/${dir}/configure)
		mkdir(${root}/${build_dir.packages}/${dir})
		config(config-e2fsprogs.mk, config_opts = --prefix=/usr --with-root-prefix="" --host=$(ARCH_TARGET) --with-cc="${cc.packages}" --with-linker=${ld.packages} --disable-tls, ${build_dir.packages}/${dir}/Makefile, ${unpack})
		build(${build_dir.packages}/${dir}/misc/mke2fs, ${build_dir.packages}/${dir}/Makefile, ${root}/${build_dir.packages}/${dir}/.dir)
		install(make_opts = DESTDIR=${root}/${rootfs_dir}, ${rootfs_dir}/sbin/mke2fs, ${build_dir.packages}/${dir}/misc/mke2fs)
		{
			${target}: ${dependencies} ${current_build_target}
				${env_packages} ${make} -C ${current_package_dir} install ${make_opts}
				${env_packages} ${make} -C ${current_package_dir} install-libs ${make_opts}
				${touch} ${target}
		}
		clean()
		distclean()
	:e2fsprogs
:packages