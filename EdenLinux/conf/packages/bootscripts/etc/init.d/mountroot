. /etc/init.d/functions

echo "Starting fsck for root filesystem."
/sbin/fsck -T -C /
if [ "$?" -gt 2 ]; then
	echo "WARNING: Errors found while checking root filesystem."
	echo "You can login as root now, the system will reboot after logout."
	sulogin
	reboot
elif [ "$?" = "2" ]; then
	echo "NOTICE: System needsto be rebooted now."
	sleep 1
	reboot
else
	echo -n "Checking root filesystem: "
	check_status
fi

echo -n "Remounting root rw: "
mount -o remount,rw /
check_status