#!/bin/sh
### BEGIN INIT INFO
# Provides:          modules  
# Short-Description: module loading Startup Script
### END INIT INFO

. /etc/init.d/functions

# Assure that the kernel has module support.
[ -e /proc/ksyms -o -e /proc/modules ] || exit 0

case "$1" in
start)
	echo -n "Loading modules: "
	
    grep '^[^#]' /etc/modules |
	while read module args
	do
	    [ "$module" ] || continue
	    modprobe $module $args || :
		echo $module
	done

	check_status
	;;
stop)
	;;
restart)
	start
	;;
*)
	echo "Usage: $0 {start|stop|restart}"
	exit 1
	;;
esac

# End $rc_base/init.d/modules